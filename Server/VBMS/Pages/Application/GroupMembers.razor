@page "/group/members"

<MudContainer Class="mt-16 px-8 cont" MaxWidth="MaxWidth.False">
<MudGrid Spacing="3" Justify="Justify.Center">
  <MudItem align="center" xs="12">
      <MudPaper Elevation="20" Class="title-card p-4 ">
          <MudText Class="text-white" Align="Align.Center" Typo="Typo.h5">Manage Memberships</MudText>
      </MudPaper>
  </MudItem>
  <MudItem xs="12">
      <table class="table table-striped table-hover">
          <thead class="thead-dark">
              <tr>
                  <th>Id</th>
                  <th>First Name</th>
                  <th>Last Name</th>
                  <th>NRC Number</th>
                  <th>Phone Number</th>
                  <th>Date Joined</th>
                  <th>Status</th>
                  <th>Added By</th>
                  <th>Actions</th>
              </tr>
          </thead>
          <tbody>
              @foreach (var item in Members)
              {
                 <tr class="text-white">
                     <td>@item.Id</td>
                     <td>@item.PersonalDetails.FirstName</td>
                     <td>@item.PersonalDetails.LastName</td>
                     <td>@item.PersonalDetails.NrcNumber</td>
                     <td>@item.PersonalDetails.PhoneNumber</td>
                     <td>@item.DateJoined</td>
                     <td>@item.Status.ToString()</td>
                     <td>@item.CreatedBy</td>
                     <td>
                           <MudButton StartIcon="@Icons.Material.Filled.Edit" Size="Size.Small" Color="Color.Warning">Edit</MudButton>
                           <MudButton StartIcon="@Icons.Material.Filled.DeleteForever" Size="Size.Small" Color="Color.Error">Remove</MudButton>
                     </td>
                 </tr> 
              }
          </tbody>

      </table>
  </MudItem>
</MudGrid>
</MudContainer>

@code{
    VillageBankGroup VillageBank { get; set; } = new();

    [CascadingParameter] Task<AuthenticationState>AuthenticationStateTask{ get; set; }
    GroupAdmin Admin { get; set; } = new();
    List<VillageGroupMembership> Members = new();
    protected override async Task OnInitializedAsync()
    {

        var claimsPrincipal = (await AuthenticationStateTask).User;
        if(claimsPrincipal.Identity.IsAuthenticated)
        {
            Admin = await groupAdminService.GetByUserGuid(await userService.GetGuid(claimsPrincipal.Identity.Name));
            VillageBank = Admin.Group;
            Members = await membershipService.GetMembers(VillageBank.Id);
        }

          
    }
}





















<style>
    body {
        background-color: #13262F;
    }
    .cont{
        background-color: #13262F;
    }
    .title-card{
        max-width : fit-content;
        border-radius : 10px;
        background-color : #13262F;
    }
</style>