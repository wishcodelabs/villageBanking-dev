
<MudDialog>
    <DialogContent>
        <EditForm id="editForm" Model="Model" OnInvalidSubmit="ModelInvalid" OnValidSubmit="Submit">
            <ObjectGraphDataAnnotationsValidator />
            <FluentValidationValidator />
            <MudGrid Justify="Justify.SpaceBetween" Spacing="2">
                <MudItem xs="6" sm="4">
                    <MudTextField T="string"
                                  For="(()=>Model.PersonalDetails.FirstName)"
                                  Immediate="true"
                                  @bind-Value="@Model.PersonalDetails.FirstName"
                                  Variant="Variant.Outlined"
                                  Label="First Name"
                                  Clearable="(!IsAdmin)"
                                  ReadOnly="(IsAdmin)" />
                </MudItem>
                <MudItem xs="6" sm="4">
                    <MudTextField T="string"
                                  For="(()=>Model.PersonalDetails.LastName)"
                                  Immediate="true"
                                  @bind-Value="@Model.PersonalDetails.LastName"
                                  Variant="Variant.Outlined"
                                  Clearable="((!IsAdmin))"
                                  Label="Last Name"
                                  ReadOnly="(IsAdmin)" />
                </MudItem>
                <MudItem xs="6" sm="4">
                    <MudTextField T="string"
                                  For="(()=>Model.PersonalDetails.NrcNumber)"
                                  Immediate="true"
                                  Clearable="true"
                                  @bind-Value="@Model.PersonalDetails.NrcNumber"
                                  Variant="Variant.Outlined"
                                  Label="NRC Number" />
                </MudItem>
                <MudItem xs="6" sm="4">
                    <MudTextField T="string"
                                  For="(()=>Model.PersonalDetails.PhoneNumber)"
                                  Immediate="true"
                                  Clearable="true"
                                  InputMode="InputMode.tel"
                                  @bind-Value="@Model.PersonalDetails.PhoneNumber"
                                  Variant="Variant.Outlined"
                                  Label="Phone Number" />
                </MudItem>
                <MudItem xs="6" sm="4">
                    <MudTextField T="string"
                                  For="(()=>Model.PersonalDetails.EmailAddress)"
                                  Immediate="true"
                                  InputMode="InputMode.email"
                                  Clearable="(!IsAdmin)"
                                  ReadOnly="(IsAdmin)"
                                  @bind-Value="@Model.PersonalDetails.EmailAddress"
                                  Variant="Variant.Outlined"
                                  Label="E-mail" />
                </MudItem>
                <MudItem xs="6" sm="4">
                    <MudSelect T="Gender"
                               For="(()=>Model.PersonalDetails.Gender)"
                               Immediate="true"
                               Clearable="true"
                               @bind-Value="@Model.PersonalDetails.Gender"
                               Variant="Variant.Outlined"
                               Label="Gender">
                        @foreach (var item in (Gender[])Enum.GetValues(typeof(Gender)))
                        {
                            <MudSelectItem T="Gender" Value="item">@item.ToString()</MudSelectItem>
                        }
                    </MudSelect>
                </MudItem>
                <MudItem xs="6" sm="4">
                    <MudSelect T="MaritalStatus"
                               For="(()=>Model.PersonalDetails.MaritalStatus)"
                               Immediate="true"
                               Clearable="true"
                               @bind-Value="@Model.PersonalDetails.MaritalStatus"
                               Variant="Variant.Outlined"
                               Label="Marital Status">
                        @foreach (var item in (MaritalStatus[])Enum.GetValues(typeof(MaritalStatus)))
                        {
                            <MudSelectItem T="MaritalStatus" Value="item">@item.ToString()</MudSelectItem>
                        }
                    </MudSelect>
                </MudItem>
                <MudItem xs="6" sm="4">
                    <MudTextField T="string"
                                  For="(()=>Model.PersonalDetails.Occupation)"
                                  Immediate="true"
                                  InputMode="InputMode.text"
                                  Clearable="true"
                                  @bind-Value="@Model.PersonalDetails.Occupation"
                                  Variant="Variant.Outlined"
                                  Label="Occupation" />
                </MudItem>
                <MudItem xs="6" sm="4">
                    <MudSelect T="VillageGroupRole"
                               Immediate="true"
                               Clearable="true"
                               MultiSelection="true"
                               Variant="Variant.Outlined"
                               @bind-SelectedValues="@memberRoles"
                               Label="Group Role(s)">
                        @foreach (var item in (VillageGroupRole[])Enum.GetValues(typeof(VillageGroupRole)))
                        {
                            <MudSelectItem T="VillageGroupRole" Value="item">@item.ToString()</MudSelectItem>
                        }
                    </MudSelect>
                    <MudChipSet>
                        @foreach (var item in memberRoles)
                        {
                            <MudChip Color="Color.Secondary" Text="@item.ToString()"></MudChip>
                        }
                    </MudChipSet>
                </MudItem>
                <MudItem xs="12">
                    <MudText Typo="Typo.h5" Align="Align.Center">Residential Address</MudText>
                </MudItem>
                <MudItem xs="6" sm="4">
                    <MudTextField T="string"
                                  For="(()=>Model.PersonalDetails.PhysicalAddress.HouseNumber)"
                                  Immediate="true"
                                  InputMode="InputMode.text"
                                  Clearable="true"
                                  @bind-Value="@Model.PersonalDetails.PhysicalAddress.HouseNumber"
                                  Variant="Variant.Outlined"
                                  Label="Address" />
                </MudItem>
                <MudItem xs="6" sm="4">
                    <MudSelect T="int"
                               Immediate="true"
                               InputMode="InputMode.text"
                               Clearable="true"
                               @bind-Value="@ProvinceId"
                               Variant="Variant.Outlined"
                               Label="Province">
                        @foreach (var item in ProvinceList)
                        {
                            <MudSelectItem T="int" Value="@item.Id">@item.Name</MudSelectItem>
                        }
                    </MudSelect>
                </MudItem>
                <MudItem xs="6" sm="4">
                    <MudSelect T="int"
                               For="(()=>Model.PersonalDetails.PhysicalAddress.CityId)"
                               Immediate="true"
                               InputMode="InputMode.text"
                               Clearable="true"
                               @bind-Value="@Model.PersonalDetails.PhysicalAddress.CityId"
                               Variant="Variant.Outlined"
                               Label="City/District">

                        @foreach (var item in cityService.GetCities(ProvinceId))
                        {
                            <MudSelectItem T="int" Value="@item.Id">@item.Name</MudSelectItem>
                        }
                    </MudSelect>
                </MudItem>
                @if (!IsAdmin && !IsEditing)
                {
                    <MudItem xs="12">
                        <MudText Typo="Typo.h5" Align="Align.Center">New Account Details</MudText>
                    </MudItem>
                    <MudItem xs="6" sm="4">
                        <MudTextField T="string"
                                  Immediate="true"
                                  InputMode="InputMode.text"
                                  Clearable="true"
                                  Required="true"
                                  RequiredError="Username can't be empty'"
                                  @bind-Value="userName"
                                  Variant="Variant.Outlined"
                                  Label="User Name" />
                    </MudItem>
                    <MudItem xs="6" sm="4">
                     
                        <MudTextField T="string"
                                  InputMode="InputMode.text"
                                  Clearable="false"
                                  ReadOnly="true"
                                  Value='("Pa$$word1234")'
                                  Variant="Variant.Outlined"
                                  Label="Activation Password" />
                    </MudItem>
                }
                <MudItem xs="6" sm="4">
                    <MudSelect T="VillageGroupMemberStatus"
                               For="(()=>Model.Status)"
                               Immediate="true"
                               Clearable="IsAdmin"
                               ReadOnly="(!IsAdmin)"
                               @bind-Value="@Model.Status"
                               Variant="Variant.Outlined"
                               Label="Current Status">
                        @foreach (var item in (VillageGroupMemberStatus[])Enum.GetValues(typeof(VillageGroupMemberStatus)))
                        {
                            <MudSelectItem T="VillageGroupMemberStatus" Value="@item">@item.ToString()</MudSelectItem>
                        }
                    </MudSelect>
                </MudItem>

            </MudGrid>
        </EditForm>
    </DialogContent>
    <DialogActions>
        <MudButton Color="Color.Secondary" Variant="Variant.Filled" OnClick="Cancel">Cancel</MudButton>
        <MudButton Variant="Variant.Filled" UserAttributes="_attributes"  ButtonType="MudBlazor.ButtonType.Submit" Color="Color.Primary">Save</MudButton>
    </DialogActions>
</MudDialog>

