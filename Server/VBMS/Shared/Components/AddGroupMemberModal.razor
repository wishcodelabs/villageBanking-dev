<MudDialog>
    <DialogContent>
        <EditForm Model="@GroupMembershipModel" OnValidSubmit="Submit" OnInvalidSubmit="ModelInvalid">
           <ObjectGraphDataAnnotationsValidator />
           <FluentValidationValidator />
            <MudGrid Justify="Justify.SpaceBetween" Spacing="2">
                <MudItem xs="6" sm="4">
                    <MudTextField T="string"
                                  For="(()=>GroupMembershipModel.PersonalDetails.FirstName)"
                                  Immediate="true"
                                  @bind-Value="@GroupMembershipModel.PersonalDetails.FirstName"
                                  Variant="Variant.Outlined"
                                  Label="First Name"
                                  Clearable="UserGuid==null"
                                  ReadOnly="(UserGuid!=null)" />
                </MudItem>
                <MudItem xs="6" sm="4">
                    <MudTextField T="string"
                                  For="(()=>GroupMembershipModel.PersonalDetails.LastName)"
                                  Immediate="true"
                                  @bind-Value="@GroupMembershipModel.PersonalDetails.LastName"
                                  Variant="Variant.Outlined"
                                  Clearable="(UserGuid==null)"
                                  Label="Last Name"
                                  ReadOnly="(UserGuid!=null)" />
                </MudItem>
                <MudItem xs="6" sm="4">
                    <MudTextField T="string"
                                  For="(()=>GroupMembershipModel.PersonalDetails.NrcNumber)"
                                  Immediate="true"
                                  Clearable="true"
                                  @bind-Value="@GroupMembershipModel.PersonalDetails.NrcNumber"
                                  Variant="Variant.Outlined"
                                  Label="NRC Number" />
                </MudItem>
                <MudItem xs="6" sm="4">
                    <MudTextField T="string"
                                  For="(()=>GroupMembershipModel.PersonalDetails.PhoneNumber)"
                                  Immediate="true"
                                  Clearable="true"
                                  InputMode="InputMode.tel"
                                  @bind-Value="@GroupMembershipModel.PersonalDetails.PhoneNumber"
                                  Variant="Variant.Outlined"
                                  Label="Phone Number" />
                </MudItem>
                <MudItem xs="6" sm="4">
                    <MudTextField T="string"
                                  For="(()=>GroupMembershipModel.PersonalDetails.EmailAddress)"
                                  Immediate="true"
                                  InputMode="InputMode.email"
                                  Clearable="(UserGuid==null)"
                                  ReadOnly="(UserGuid!=null)"
                                 
                                  @bind-Value="@GroupMembershipModel.PersonalDetails.EmailAddress"
                                  Variant="Variant.Outlined"
                                  Label="E-mail" />
                </MudItem>
                <MudItem xs="6" sm="4">
                    <MudSelect T="Gender"
                               For="(()=>GroupMembershipModel.PersonalDetails.Gender)"
                               Immediate="true"
                               Clearable="true"
                               @bind-Value="@GroupMembershipModel.PersonalDetails.Gender"
                               Variant="Variant.Outlined"
                               Label="Gender">
                               @foreach (var item in (Gender[])Enum.GetValues(typeof(Gender)))
                               {
                                  <MudSelectItem T="Gender" Value="item">@item.ToString()</MudSelectItem>
                               }
                    </MudSelect>
                </MudItem>
                <MudItem xs="6" sm="4">
                    <MudSelect T="MaritalStatus"
                               For="(()=>GroupMembershipModel.PersonalDetails.MaritalStatus)"
                               Immediate="true"
                               Clearable="true"
                               @bind-Value="@GroupMembershipModel.PersonalDetails.MaritalStatus"
                               Variant="Variant.Outlined"
                               Label="Marital Status">
                               @foreach (var item in (MaritalStatus [])Enum.GetValues(typeof(MaritalStatus)))
                               {
                                  <MudSelectItem T="MaritalStatus" Value="item">@item.ToString()</MudSelectItem>
                               }
                    </MudSelect>
                </MudItem>
                <MudItem xs="6" sm="4">
                    <MudTextField T="string"
                                  For="(()=>GroupMembershipModel.PersonalDetails.Occupation)"
                                  Immediate="true"
                                  InputMode="InputMode.text"
                                  Clearable="true"
                                  @bind-Value="@GroupMembershipModel.PersonalDetails.Occupation"
                                  Variant="Variant.Outlined"
                                  Label="Occupation" />
                </MudItem>
                <MudItem xs="6" sm="4">
                     <MudSelect T="VillageGroupRole"  
                                Immediate="true"
                                Clearable="true"
                                MultiSelection="true"
                                Variant="Variant.Outlined"
                                @bind-SelectedValues="@memberRoles"
                                Label="Group Role(s)">
                               @foreach (var item in (VillageGroupRole [])Enum.GetValues(typeof(VillageGroupRole)))
                               {
                                  <MudSelectItem T="VillageGroupRole" Value="item">@item.ToString()</MudSelectItem>
                               }
                    </MudSelect>
                    <MudChipSet>
                    @foreach (var item in memberRoles)
                    {
                      <MudChip Color="Color.Secondary"  Text="@item.ToString()"></MudChip>  
                    }
                    </MudChipSet>
                </MudItem>
                <MudItem xs="12">
                    <MudText Typo="Typo.h5" Align="Align.Center">Residential Address</MudText>
                </MudItem>
                <MudItem xs="6" sm="4">
                     <MudTextField T="string"
                                  For="(()=>GroupMembershipModel.PersonalDetails.PhysicalAddress.HouseNumber)"
                                  Immediate="true"
                                  InputMode="InputMode.text"
                                  Clearable="true"
                                  @bind-Value="@GroupMembershipModel.PersonalDetails.PhysicalAddress.HouseNumber"
                                  Variant="Variant.Outlined"
                                  Label="Address" />
                </MudItem>
                <MudItem xs="6" sm="4">
                    <MudSelect T="int"
                                  For="(()=>ProvinceId)"
                                  Immediate="true"
                                  InputMode="InputMode.text"
                                  Clearable="true"
                                  @bind-Value="@ProvinceId"
                                  @onselectionchange="GetCities"
                                  Variant="Variant.Outlined"
                                  Label="Province" >
                     @foreach (var item in ProvinceList)
                     {
                         <MudSelectItem T="int" Value="@item.Id">@item.Name</MudSelectItem>
                     }
                    </MudSelect>
                </MudItem>
                <MudItem xs="6" sm="4">
                    <MudSelect T="int"
                                  For="(()=>GroupMembershipModel.PersonalDetails.PhysicalAddress.CityId)"
                                  Immediate="true"
                                  InputMode="InputMode.text"
                                  Clearable="true"
                                  @bind-Value="@GroupMembershipModel.PersonalDetails.PhysicalAddress.CityId"
                                  Variant="Variant.Outlined"
                                  Label="City/District" >
                        
                       @foreach (var item in cityService.GetCities(ProvinceId))
                     {
                         <MudSelectItem T="int" Value="@item.Id">@item.Name</MudSelectItem>
                     }
                    </MudSelect>
                </MudItem>
                <MudItem xs="6" sm="4"></MudItem>
            </MudGrid>
        </EditForm>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="Cancel">Cancel</MudButton>
        <MudButton Color="Color.Primary" OnClick="Submit">Save</MudButton>
    </DialogActions>
</MudDialog>

